# See environment variables in file ".env"
version: '3.8'
services:
  python:
    build:
      context: docker/python
      target: ${TARGET:-local}  # dev or local
    environment:
    - MODEL_FOLDER=/opt/speech_service/models/
    - UPLOAD_FOLDER=/opt/speech_service/uploads/
    stdin_open: true  # docker run -i
    tty: true         # docker run -t
    volumes:
    - .:/opt/speech_service
    networks:
    - app-tier
    ports:
    - "8200:8200"
    deploy:
      resources:
        reservations:
          devices:
          - capabilities: [gpu]
networks:
  app-tier:
    driver: bridge
